(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(t){if(t.ep)return;t.ep=!0;const s=n(t);fetch(t.href,s)}})();const c=document.getElementById("input"),d=document.getElementById("noms"),o=document.getElementById("result"),b=document.getElementById("btn-reset"),E=document.getElementById("btn-hasard"),y=document.getElementById("btn-ajouter"),v=document.getElementById("selectGroupe"),f=document.getElementById("checkGroupe"),u=document.getElementById("btn-undo");document.getElementById("btn-export");document.getElementById("btn-print");const h=document.getElementById("btn-afficher"),m="hasard_app_participants",p={save(r){try{localStorage.setItem(m,JSON.stringify(r))}catch(e){console.error("Storage save error:",e)}},load(){try{const r=localStorage.getItem(m);return r?JSON.parse(r):[]}catch(r){return console.error("Storage load error:",r),[]}},clear(){try{localStorage.removeItem(m)}catch(r){console.error("Storage clear error:",r)}}};function I(r){return Math.floor(Math.random()*r)}function x(r){const e=I(r.length);return{item:r[e],index:e}}class C{constructor(e){this.participants=[],this.nextId=1,this.deletedStack=[],this.participants=e&&e.length?e:p.load(),this.participants.length&&(this.nextId=Math.max(...this.participants.map(n=>n.id))+1),this.renderParticipantList(),this.updateButtons()}addParticipant(e){const n=e.trim();if(!n)return null;const i={id:this.nextId++,name:n};return this.participants.push(i),p.save(this.participants),this.appendParticipantNode(i),this.updateButtons(),i}deleteParticipant(e){const n=this.participants.findIndex(s=>s.id===e);if(n===-1)return;const[i]=this.participants.splice(n,1);this.deletedStack.push(i),p.save(this.participants),this.renderParticipantList(),this.updateButtons();const t=new CustomEvent("participantDeleted",{detail:i});document.dispatchEvent(t)}undoDelete(){const e=this.deletedStack.pop();if(!e)return;this.participants.push(e),this.participants.sort((i,t)=>i.id-t.id),p.save(this.participants),this.renderParticipantList(),this.updateButtons();const n=new CustomEvent("participantUndo",{detail:e});document.dispatchEvent(n)}reset(){this.participants=[],this.deletedStack=[],this.nextId=1,p.clear(),this.clearDom(),this.updateButtons()}generateRandomOrder(){const e=[...this.participants],n=[];for(;e.length;){const{item:i,index:t}=x(e);n.push(i),e.splice(t,1)}return n}generateRandomGroups(e){const n=this.generateRandomOrder(),i=[];for(;n.length;)i.push(n.splice(0,e));return i}clearDom(){d.innerHTML="",o.innerHTML=""}renderParticipantList(){d.innerHTML="",this.participants.forEach(e=>this.appendParticipantNode(e))}appendParticipantNode(e){const n=document.createElement("div");n.className="participant-row";const i=document.createElement("span");i.textContent=`${e.id}. ${e.name}`;const t=document.createElement("button");t.textContent="ðŸ—‘",t.title="Supprimer ce participant",t.className="delete-btn",t.addEventListener("click",()=>this.deleteParticipant(e.id)),n.appendChild(i),n.appendChild(t),d.appendChild(n)}renderOrder(e){o.innerHTML="",e.forEach((i,t)=>{const s=document.createElement("p");s.textContent=`${t+1}. ${i.name}`,o.appendChild(s)});const n=document.createElement("h3");n.textContent="Fin",n.style.color="var(--troisieme-color)",o.appendChild(n)}renderGroups(e){o.innerHTML="",e.forEach((i,t)=>{const s=document.createElement("h2");s.textContent=`Groupe ${t+1}`,o.appendChild(s),i.forEach((l,L)=>{const g=document.createElement("p");g.textContent=`${L+1}. ${l.name}`,o.appendChild(g)})});const n=document.createElement("h3");n.textContent="Fin",n.style.color="var(--troisieme-color)",o.appendChild(n)}count(){return this.participants.length}updateButtons(){E.disabled=this.participants.length===0}Afficher(e){h.addEventListener("click",()=>{h.classList.toggle("plusMoins")})}}const a=new C;function S(){c.style.boxShadow=""}y.addEventListener("click",()=>{if(!a.addParticipant(c.value)){c.style.boxShadow="0 0 20px red",c.focus();return}c.value="",S(),d.scrollTop=d.scrollHeight});c.addEventListener("input",()=>{c.classList.add("inputAnimation"),c.style.boxShadow=""});document.addEventListener("keydown",r=>{r.key==="Enter"&&y.click()});b.addEventListener("click",r=>{r.preventDefault(),a.reset(),u.disabled=!0});f.addEventListener("change",()=>{v.style.display=f.checked?"inline-block":"none"});E.addEventListener("click",()=>{if(f.checked){const r=parseInt(v.value,10)||1,e=a.generateRandomGroups(r);a.renderGroups(e)}else{const r=a.generateRandomOrder();a.renderOrder(r)}});u.addEventListener("click",()=>{a.undoDelete(),u.disabled=!0});document.addEventListener("participantDeleted",()=>{u.disabled=!1});h.addEventListener("click",()=>{d.classList.toggle("plusMoins"),h.textContent=d.classList.contains("plusMoins")?"Afficher plus":"Afficher moins"});
